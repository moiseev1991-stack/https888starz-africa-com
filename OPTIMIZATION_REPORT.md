# Отчёт по оптимизации статической версии

Оптимизация выполняется **после** достижения визуальной идентичности статики с WP-сайтом.

---

## 5.1 Удаление лишнего

| Действие | Статус | Примечание |
|----------|--------|------------|
| Отключить/удалить неиспользуемые CSS/JS | Рекомендовано | Анализ по использованию классов/селекторов; осторожно с темой Zento (общие стили). |
| Убрать wp-emoji, embed-скрипты | Рекомендовано | В экспорте из WP в HTML могут остаться скрипты wp-emoji; удалить теги и скрипты, если не нужны. |
| Убрать лишние preload/prefetch | По необходимости | Оставить только критичные (шрифты, главный CSS). |
| Заглушить ajax_var / счётчик просмотров | Рекомендовано | Убрать вызовы admin-ajax.php, чтобы не было ошибок в консоли. |

**Что не делалось автоматически:** Массовое удаление «неиспользуемого» CSS/JS без проверки по страницам — высокий риск сломать верстку. Рекомендуется делать выборочно или с тестами.

---

## 5.2 Минификация и кеш

| Действие | Статус | Инструмент |
|----------|--------|------------|
| Минификация CSS/JS | Рекомендовано | esbuild, clean-css, terser — применять к копии файлов в dist, не к исходникам темы. |
| Cache-busting (hash в именах) | Опционально | При сборке подставлять версию или хеш в имена ассетов; обновить ссылки в HTML. Либо полагаться на Cache-Control на сервере. |

Сейчас экспорт сохраняет файлы «как есть»; минификацию можно добавить отдельным шагом в скрипте сборки.

---

## 5.3 Изображения

| Действие | Статус | Примечание |
|----------|--------|------------|
| Проверить самые тяжёлые | Рекомендовано | Анализ размеров в wp-content/uploads и в HTML. |
| WebP/AVIF + fallback | По желанию | Конвертация с сохранением исходников; <picture> с fallback на jpg/png. Не делать при риске потери качества. |
| width/height, lazyload | Рекомендовано | Добавить атрибуты размеров и loading="lazy" где возможно, без поломки вёрстки. |

Автоматическая конвертация в webp не внедрялась, чтобы не менять визуал без проверки.

---

## 5.4 Шрифты

| Действие | Статус | Примечание |
|----------|--------|------------|
| Google Fonts → self-host woff2 | Рекомендовано | Скачать Urbanist, DM Sans в woff2, положить в dist, заменить ссылки в CSS/HTML. |
| Preload ключевых woff2 | Рекомендовано | Один-два основных начертания в <link rel="preload">. |

Тема подключает шрифты через `epcl_google_fonts_url()`; в статике ссылки остаются на Google — при желании заменить вручную или скриптом постобработки.

---

## 5.5 Серверные заголовки (рекомендации)

См. файлы:

- **nginx.conf.snippet** — пример настроек nginx: Cache-Control, gzip/brotli, immutable для статики.
- **.htaccess.snippet** — пример для Apache: кеш, сжатие.

Размещение этих фрагментов на проде — на усмотрение администратора сервера.

---

## Итог

- **Сделано в рамках проекта:** экспорт в статику, копирование ассетов, документирование замены динамики и рекомендаций по оптимизации.
- **Не делалось намеренно:** агрессивное удаление CSS/JS, автоматическая конвертация изображений в webp, замена шрифтов (требует проверки отображения).
- **Рекомендовано сделать после проверки идентичности:** минификация своих JS/CSS в dist, self-host шрифтов, lazyload и размеры для изображений, удаление/заглушка wp-emoji и ajax-вызовов.

После любых изменений — повторная проверка ключевых страниц и Lighthouse (Performance 90+ по возможности).
