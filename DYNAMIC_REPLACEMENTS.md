# Замена динамических функций (статическая версия)

Что в WordPress работало через бэкенд и как это обработано в статическом экспорте.

---

## 1. Счётчик просмотров (views counter)

**Было:** Тема Zento передаёт в JS `ajax_var.url` (admin-ajax.php) и `ajax_var.nonce` для учёта просмотров записей.

**В статике:**  
- Вызовы `admin-ajax.php` не работают.  
- **Рекомендация:** в постобработке (или в теме перед экспортом) отключить счётчик или подменить блок с числом просмотров статическим значением. В экспортированном HTML можно оставить разметку, но скрипт, который отправляет запрос, можно удалить/заглушить в шаге оптимизации (см. OPTIMIZATION_REPORT.md).

**Реализация:** В финальной статике можно добавить небольшой скрипт, который удаляет или скрывает элементы, зависящие от ajax_var (например, кнопки «увеличить просмотры»), либо оставить отображение числа как есть (без обновления).

---

## 2. Поиск по сайту

**Было:** Тема выводит форму поиска (searchform, search-lightbox), запрос уходит на `/?s=...` или `/search/...` (PHP).

**В статике:**  
- Серверный поиск недоступен.  
- **Варианты замены:**  
  - **A)** Скрыть форму поиска или заменить на заглушку («Поиск в статической версии недоступен»).  
  - **B)** Клиентский поиск: собрать индекс (title + excerpt + url) из выгруженных страниц, подключить Lunr.js или Fuse.js, форма вводит запрос и показывает результаты из индекса (без бэкенда).

**Рекомендация:** Для максимальной идентичности верстки — оставить форму, по клику показывать страницу с инструкцией или внедрить лёгкий клиентский поиск (отдельная страница search.html с индексом).

---

## 3. Комментарии

**Было:** Тема подключает `comment-reply` и выводит блок комментариев (comments.php).

**В статике:**  
- Добавление/загрузка комментариев через WP невозможно.  
- **Варианты:**  
  - Оставить блок как есть, но без формы отправки (только уже выгруженные комментарии в HTML).  
  - Скрыть блок комментариев целиком.  
  - Подключить внешний виджет (Disqus и т.п.) — увеличивает вес и зависимость от третьего сервиса.

**Рекомендация:** Сохранить в экспорте уже отрендеренные комментарии (они попадут в HTML при выгрузке). Форму отправки можно скрыть или заменить текстом «Комментирование отключено в статической версии».

---

## 4. Формы (Contact Form 7, WPForms и т.п.)

**Было:** В списке плагинов не обнаружены формы; в теме могут быть кастомные формы.

**В статике:**  
- Если при аудите появятся формы: отправку на бэкенд WP заменить на внешний endpoint (Formspree, Netlify Forms, свой serverless) или на `mailto:`.  
- Верстку и стили форм не менять — только атрибут `action` и при необходимости обёртку в iframe/скрипт сервиса.

**Текущий статус:** Замен не требуется до появления форм.

---

## 5. Логин / личный кабинет

**Было:** Есть только wps-hide-login (скрытие wp-login). WooCommerce не используется.

**В статике:** Логин и кабинет не входят в статическую версию. Ссылки на вход можно удалить или вести на отдельную страницу с пояснением.

---

## 6. AJAX и admin-ajax.php

**Было:** Тема использует `admin_url('admin-ajax.php')` для счётчика просмотров; другие плагины могут подключать свои запросы.

**В статике:**  
- Все вызовы admin-ajax.php убрать или заглушить (чтобы не было ошибок в консоли и лишних запросов).  
- В шаге оптимизации можно удалить/переопределить объект `ajax_var` в скриптах или убрать скрипты, которые только это и делают.

---

## Итог

| Функция        | Решение в статике |
|----------------|--------------------|
| Просмотры      | Не обновляются; скрыть/заглушить вызовы ajax. |
| Поиск          | Отключить или клиентский поиск (Lunr/Fuse).   |
| Комментарии    | Оставить уже выгруженные в HTML; форму скрыть или отключить. |
| Формы          | При появлении — Formspree / Netlify / mailto. |
| Логин/кабинет  | Не входят в статику. |

Все замены делаются так, чтобы не ломать вёрстку и внешний вид страниц.
