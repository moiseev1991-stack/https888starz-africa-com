# Настройка на сервере (Beget / 888starzeg-egypt.com)

## Права доступа (атрибуты) рекурсивно: 755 папкам, 644 файлам

В атрибутах файла для `public_html`: «Применить рекурсивно» + сначала «Применить только к директориям» с кодом **755**, затем «Применить только к файлам» с кодом **644**.

## Права доступа — ты всё сделал правильно

Ты выставил **«Настроить общий доступ к текущей директории»** для папки `public_html`: «Чтение и запись» + «Включая вложенные папки». Это как раз то, что нужно: сервер получает доступ к файлам. Делается это в файловом менеджере Beget (Инструменты → Настроить общий доступ к текущей директории) или через панель хостинга для этой папки. Отдельно искать «chmod 644» в интерфейсе Beget не обязательно.

---

## Почему всё ещё 500 на `/assets/js/app.js`

Чаще всего причина в том, что **деплой с GitHub заливает файлы не в ту папку**, откуда отдаётся сайт.

У тебя на скриншоте путь такой: **`888starzeg-egypt.com/public_html/apk`**. То есть сайт открывается из папки **`888starzeg-egypt.com/public_html/`**. В ней должны лежать `index.html`, папка `assets/`, файл `.htaccess` и т.д.

Раньше в workflow было **server-dir: /** — заливка шла в корень FTP. Тогда файлы могли попадать не в `888starzeg-egypt.com/public_html/`, а выше, и запрос к `https://888starzeg-egypt.com/assets/js/app.js` шёл в пустое место или в скрипт → 500.

### Что сделать: указать папку деплоя в GitHub

1. Открой репозиторий на GitHub → **Settings** → **Secrets and variables** → **Actions**.
2. Нажми **New repository secret**.
3. Имя: **`SERVER_DIR`**.
4. Значение: **`888starzeg-egypt.com/public_html`** (именно та папка на FTP, в которой лежат `index.html` и `assets/`; без слэшей в начале и в конце).
5. Сохрани.

После следующего пуша в `main` деплой будет заливать содержимое `public/` уже в эту папку. Тогда в корне сайта окажутся правильные `index.html`, `assets/js/app.js` и `.htaccess`, и запрос к `app.js` должен отдавать код, а не 500.

Если у тебя на Beget папка называется иначе (например, только `public_html` без имени домена), в секрет **SERVER_DIR** подставь тот путь, который видишь в файловом менеджере как корень сайта 888starzeg-egypt.com.

---

## Если 500 остаётся после смены SERVER_DIR

- В панели Beget открой **логи / error log** для домена и посмотри, что пишется в момент открытия `https://888starzeg-egypt.com/assets/js/app.js`. Там будет точная причина 500.
- Убедись, что в корне сайта (в той же папке, что и `index.html`) лежит файл **`.htaccess`** из репозитория (в нём есть правило для `assets/`).

---

## После любых изменений

- В Cloudflare: **Caching → Purge Everything**.
- Проверь: `https://888starzeg-egypt.com/assets/js/app.js` — должна открываться страница с кодом JS, а не «Internal Server Error».
